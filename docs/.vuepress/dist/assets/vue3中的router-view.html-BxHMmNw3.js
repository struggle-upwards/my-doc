import{_ as n,c as s,o as a,a as t}from"./app-DjAegRR8.js";const e={},p=t(`<h1 id="vue3中的router-view" tabindex="-1"><a class="header-anchor" href="#vue3中的router-view"><span>Vue3中的router-view</span></a></h1><h3 id="key的作用" tabindex="-1"><a class="header-anchor" href="#key的作用"><span>key的作用</span></a></h3><p><strong>由于 Vue 会复用相同组件, 所以当同一个组件不同路由发生跳转时将不在执行created, mounted之类的钩子函数 , 设置key之后会在虚拟DOM阶段比对跳转前后得key值,如果不同则重新销毁重建页面</strong></p><p><strong>设置key属性值为 route.fullpath</strong>(可以不复用组件,强制销毁)</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route.fullPath<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> </span>
<span class="line">	// 或者直接使用内置的$route</span>
<span class="line">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.fullPath<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">	<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组件复用-不执行setup-onmounted生命周期函数" tabindex="-1"><a class="header-anchor" href="#组件复用-不执行setup-onmounted生命周期函数"><span>组件复用(不执行setup,onMounted生命周期函数)</span></a></h3><p><strong>就可以设置前置路由守卫更新数据</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 更新面包屑数据</span></span>
<span class="line">    <span class="token function">getCategoryData</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="作用就是减少内存开销-防止切换路由组件还得销毁-还是组件复用加上路由守卫更新数据更加好" tabindex="-1"><a class="header-anchor" href="#作用就是减少内存开销-防止切换路由组件还得销毁-还是组件复用加上路由守卫更新数据更加好"><span>作用就是减少内存开销,防止切换路由组件还得销毁,还是组件复用加上路由守卫更新数据更加好</span></a></h4>`,9),o=[p];function l(c,u){return a(),s("div",null,o)}const r=n(e,[["render",l],["__file","vue3中的router-view.html.vue"]]),k=JSON.parse('{"path":"/note/Vue/vue-router/vue3%E4%B8%AD%E7%9A%84router-view.html","title":"Vue3中的router-view","lang":"zh-CN","frontmatter":{},"headers":[{"level":3,"title":"key的作用","slug":"key的作用","link":"#key的作用","children":[]},{"level":3,"title":"组件复用(不执行setup,onMounted生命周期函数)","slug":"组件复用-不执行setup-onmounted生命周期函数","link":"#组件复用-不执行setup-onmounted生命周期函数","children":[]}],"git":{},"filePathRelative":"note/Vue/vue-router/vue3中的router-view.md"}');export{r as comp,k as data};
